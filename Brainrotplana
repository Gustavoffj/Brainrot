-- Script TSUG Panel - Painel ArrastÃ¡vel com Teleportes
-- Execute este script em qualquer executor (Synapse, KRNL, Fluxus, etc)

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local CoreGui = game:GetService("CoreGui")
local player = Players.LocalPlayer

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- CONFIGURAÃ‡Ã•ES PERSONALIZÃVEIS
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
local CONFIG = {
    -- Cores do painel
    PanelColor = Color3.fromRGB(35, 35, 35),      -- Cor de fundo do painel
    TitleBarColor = Color3.fromRGB(25, 25, 25),   -- Cor da barra de tÃ­tulo
    ButtonColor = Color3.fromRGB(45, 45, 45),     -- Cor dos botÃµes
    ButtonHoverColor = Color3.fromRGB(60, 60, 60), -- Cor ao passar mouse
    TextColor = Color3.fromRGB(255, 255, 255),    -- Cor do texto
    
    -- Tamanhos
    PanelWidth = 300,     -- Largura do painel
    PanelHeight = 220,    -- Altura do painel
    ButtonHeight = 45,    -- Altura dos botÃµes
    
    -- TransparÃªncia
    PanelTransparency = 0,   -- 0 = opaco, 1 = invisÃ­vel
    
    -- Safezone (coordenadas)
    SafezonePos = Vector3.new(-8093.379, 16.6, -371.975),
}

-- Auto-deletar MapAtmosphere e MapRoof ao executar
local function autoDelete()
    -- Deletar MapAtmosphere
    local mapAtmosphere = workspace:FindFirstChild("MapAtmosphere")
    if mapAtmosphere then
        for _, descendant in pairs(mapAtmosphere:GetDescendants()) do
            if descendant:IsA("BasePart") then
                descendant.Transparency = 1
                descendant.CanCollide = false
            elseif descendant:IsA("Decal") or descendant:IsA("Texture") then
                descendant.Transparency = 1
            elseif descendant:IsA("ParticleEmitter") or descendant:IsA("Fire") or descendant:IsA("Smoke") then
                descendant.Enabled = false
            end
        end
        mapAtmosphere.Parent = nil
    end
    
    -- Deletar MapRoof
    local mapRoof = workspace:FindFirstChild("MapRoof")
    if mapRoof then
        for _, descendant in pairs(mapRoof:GetDescendants()) do
            if descendant:IsA("BasePart") then
                descendant.Transparency = 1
                descendant.CanCollide = false
            elseif descendant:IsA("Decal") or descendant:IsA("Texture") then
                descendant.Transparency = 1
            end
        end
        mapRoof.Parent = nil
    end
end

-- Executar auto-delete
autoDelete()

-- Proteger GUI contra detecÃ§Ã£o
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "TSUGPanel_" .. math.random(1000, 9999)
screenGui.ResetOnSpawn = false

-- Tentar colocar no CoreGui (mais seguro)
local success = pcall(function()
    screenGui.Parent = CoreGui
end)

-- Se falhar, usar gethui() ou PlayerGui
if not success then
    if gethui then
        screenGui.Parent = gethui()
    else
        screenGui.Parent = player:WaitForChild("PlayerGui")
    end
end

-- Frame Principal (Painel)
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, CONFIG.PanelWidth, 0, CONFIG.PanelHeight)
mainFrame.Position = UDim2.new(0.5, -CONFIG.PanelWidth/2, 0.5, -CONFIG.PanelHeight/2)
mainFrame.BackgroundColor3 = CONFIG.PanelColor
mainFrame.BackgroundTransparency = CONFIG.PanelTransparency
mainFrame.BorderSizePixel = 0
mainFrame.Parent = screenGui

-- Arredondar cantos
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 12)
corner.Parent = mainFrame

-- Barra de TÃ­tulo
local titleBar = Instance.new("Frame")
titleBar.Name = "TitleBar"
titleBar.Size = UDim2.new(1, 0, 0, 40)
titleBar.BackgroundColor3 = CONFIG.TitleBarColor
titleBar.BorderSizePixel = 0
titleBar.Parent = mainFrame

local titleCorner = Instance.new("UICorner")
titleCorner.CornerRadius = UDim.new(0, 12)
titleCorner.Parent = titleBar

-- TÃ­tulo
local titleLabel = Instance.new("TextLabel")
titleLabel.Size = UDim2.new(1, -80, 1, 0)
titleLabel.Position = UDim2.new(0, 10, 0, 0)
titleLabel.BackgroundTransparency = 1
titleLabel.Text = "tsug"
titleLabel.TextColor3 = CONFIG.TextColor
titleLabel.TextSize = 20
titleLabel.Font = Enum.Font.GothamBold
titleLabel.TextXAlignment = Enum.TextXAlignment.Left
titleLabel.Parent = titleBar

-- BotÃ£o Minimizar
local minimizeButton = Instance.new("TextButton")
minimizeButton.Name = "MinimizeButton"
minimizeButton.Size = UDim2.new(0, 30, 0, 30)
minimizeButton.Position = UDim2.new(1, -35, 0, 5)
minimizeButton.BackgroundColor3 = CONFIG.ButtonColor
minimizeButton.Text = "_"
minimizeButton.TextColor3 = CONFIG.TextColor
minimizeButton.TextSize = 18
minimizeButton.Font = Enum.Font.GothamBold
minimizeButton.Parent = titleBar

local minCorner = Instance.new("UICorner")
minCorner.CornerRadius = UDim.new(0, 6)
minCorner.Parent = minimizeButton

-- Container de ConteÃºdo
local contentFrame = Instance.new("Frame")
contentFrame.Name = "ContentFrame"
contentFrame.Size = UDim2.new(1, -20, 1, -60)
contentFrame.Position = UDim2.new(0, 10, 0, 50)
contentFrame.BackgroundTransparency = 1
contentFrame.Parent = mainFrame

-- FunÃ§Ã£o para criar botÃµes
local function createButton(text, position, callback)
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(1, 0, 0, CONFIG.ButtonHeight)
    button.Position = position
    button.BackgroundColor3 = CONFIG.ButtonColor
    button.Text = text
    button.TextColor3 = CONFIG.TextColor
    button.TextSize = 16
    button.Font = Enum.Font.Gotham
    button.Parent = contentFrame
    
    local btnCorner = Instance.new("UICorner")
    btnCorner.CornerRadius = UDim.new(0, 8)
    btnCorner.Parent = button
    
    -- Efeito de hover
    button.MouseEnter:Connect(function()
        button.BackgroundColor3 = CONFIG.ButtonHoverColor
    end)
    
    button.MouseLeave:Connect(function()
        button.BackgroundColor3 = CONFIG.ButtonColor
    end)
    
    button.MouseButton1Click:Connect(callback)
    
    return button
end

-- FunÃ§Ã£o de Teleporte (compatÃ­vel com exploits)
local function teleportTo(position)
    local character = player.Character or player.CharacterAdded:Wait()
    if character then
        local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
        if humanoidRootPart then
            -- MÃ©todo mais seguro para exploits
            humanoidRootPart.CFrame = CFrame.new(position)
            wait(0.1)
            humanoidRootPart.CFrame = CFrame.new(position)
        end
    end
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- SISTEMA DE TPTOOL
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
local function giveTpTool()
    local character = player.Character
    if not character then return end
    
    local backpack = player:FindFirstChild("Backpack")
    if not backpack then return end
    
    -- Verificar se jÃ¡ tem o TPTool
    if backpack:FindFirstChild("TPTool") or character:FindFirstChild("TPTool") then
        return
    end
    
    -- Criar TPTool
    local tool = Instance.new("Tool")
    tool.Name = "TPTool"
    tool.RequiresHandle = false
    tool.CanBeDropped = false
    
    -- Ãcone do cursor
    tool.TextureId = "rbxasset://textures/TerrainTools/icon_select.png"
    
    tool.Activated:Connect(function()
        local mouse = player:GetMouse()
        if mouse then
            local targetPos = mouse.Hit.Position
            teleportTo(targetPos)
        end
    end)
    
    tool.Parent = backpack
end

-- Dar TPTool ao iniciar
task.spawn(function()
    if player.Character then
        giveTpTool()
    end
end)

-- Dar TPTool quando morrer e respawnar
player.CharacterAdded:Connect(function(character)
    character:WaitForChild("Humanoid")
    task.wait(0.5) -- Aguardar o personagem carregar
    giveTpTool()
end)

-- BotÃ£o Teleporte Inicial
createButton("ğŸ“ TP Inicial", UDim2.new(0, 0, 0, 0), function()
    teleportTo(Vector3.new(-149.879, 0.1, -363.475))
end)

-- BotÃ£o Teleporte Safezone Final
createButton("ğŸ›¡ï¸ TP Safezone Final", UDim2.new(0, 0, 0, 55), function()
    teleportTo(CONFIG.SafezonePos)
end)

-- BotÃ£o Criar Bloco TP e teleportar em cima
createButton("ğŸŸ¦ TP Bloco", UDim2.new(0, 0, 0, 110), function()
    -- Teleportar em cima do bloco (altura ajustada)
    teleportTo(Vector3.new(-7585.879, 95, -316.975))
    
    -- Verificar se jÃ¡ existe
    local existingBlock = workspace:FindFirstChild("TSUGTeleportBlock")
    if existingBlock then
        existingBlock:Destroy()
    end
    
    -- Criar novo bloco (apenas client-side)
    local tpBlock = Instance.new("Part")
    tpBlock.Name = "TSUGTeleportBlock"
    tpBlock.Size = Vector3.new(8, 1, 8)
    tpBlock.Position = Vector3.new(-7585.879, 90, -316.975)
    tpBlock.Anchored = true
    tpBlock.CanCollide = true
    tpBlock.BrickColor = BrickColor.new("Bright blue")
    tpBlock.Material = Enum.Material.Neon
    tpBlock.Transparency = 0.3
    tpBlock.Parent = workspace
    
    -- Texto no bloco
    local billboard = Instance.new("BillboardGui")
    billboard.Size = UDim2.new(0, 100, 0, 50)
    billboard.StudsOffset = Vector3.new(0, 3, 0)
    billboard.Parent = tpBlock
    
    local textLabel = Instance.new("TextLabel")
    textLabel.Size = UDim2.new(1, 0, 1, 0)
    textLabel.BackgroundTransparency = 1
    textLabel.Text = "TP"
    textLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    textLabel.TextSize = 30
    textLabel.Font = Enum.Font.GothamBold
    textLabel.Parent = billboard
    
    -- Teleporte ao tocar
    tpBlock.Touched:Connect(function(hit)
        if hit.Parent == player.Character then
            teleportTo(Vector3.new(-7585.879, 95, -316.975))
        end
    end)
end)

-- Sistema de Arrastar
local dragging = false
local dragInput
local dragStart
local startPos

local function update(input)
    local delta = input.Position - dragStart
    mainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

titleBar.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStart = input.Position
        startPos = mainFrame.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

titleBar.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
        dragInput = input
    end
end)

game:GetService("UserInputService").InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        update(input)
    end
end)

-- Sistema de Minimizar
local minimized = false
local originalSize = mainFrame.Size

minimizeButton.MouseButton1Click:Connect(function()
    minimized = not minimized
    
    local targetSize
    if minimized then
        targetSize = UDim2.new(0, CONFIG.PanelWidth, 0, 40)
        minimizeButton.Text = "+"
        contentFrame.Visible = false
    else
        targetSize = originalSize
        minimizeButton.Text = "_"
        contentFrame.Visible = true
    end
    
    local tweenInfo = TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
    local tween = TweenService:Create(mainFrame, tweenInfo, {Size = targetSize})
    tween:Play()
end)

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- SISTEMA DE DETECÃ‡ÃƒO DE REMOTEEVENT
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
local detectionActive = true
local detectionRange = 50 -- DistÃ¢ncia em studs para detectar

-- Lista de nomes de RemoteEvents perigosos
local dangerousEvents = {
    "slow",
    "normal", 
    "superslow",
    "Slow",
    "Normal",
    "SuperSlow",
    "SLOW",
    "NORMAL",
    "SUPERSLOW"
}

-- FunÃ§Ã£o para verificar se Ã© um evento perigoso
local function isDangerousEvent(name)
    for _, eventName in pairs(dangerousEvents) do
        if string.lower(name):find(string.lower(eventName)) then
            return true
        end
    end
    return false
end

-- Monitorar novos RemoteEvents criados
local function monitorRemoteEvents()
    -- Verificar todos os descendants do workspace
    for _, descendant in pairs(workspace:GetDescendants()) do
        if descendant:IsA("RemoteEvent") and isDangerousEvent(descendant.Name) then
            -- Monitorar posiÃ§Ã£o do evento
            task.spawn(function()
                while descendant.Parent and detectionActive do
                    local character = player.Character
                    if character then
                        local hrp = character:FindFirstChild("HumanoidRootPart")
                        if hrp and descendant:IsA("BasePart") or descendant.Parent:IsA("Model") then
                            local eventPos
                            
                            -- Tentar pegar posiÃ§Ã£o do evento
                            if descendant:IsA("BasePart") then
                                eventPos = descendant.Position
                            elseif descendant.Parent:IsA("Model") and descendant.Parent.PrimaryPart then
                                eventPos = descendant.Parent.PrimaryPart.Position
                            elseif descendant.Parent:FindFirstChildWhichIsA("BasePart") then
                                eventPos = descendant.Parent:FindFirstChildWhichIsA("BasePart").Position
                            end
                            
                            if eventPos then
                                local distance = (hrp.Position - eventPos).Magnitude
                                
                                if distance <= detectionRange then
                                    -- Salvar posiÃ§Ã£o atual
                                    local originalPos = hrp.CFrame
                                    
                                    -- Teleportar para safezone
                                    teleportTo(CONFIG.SafezonePos)
                                    
                                    -- Esperar 1 segundo e voltar
                                    task.wait(1)
                                    hrp.CFrame = originalPos
                                    
                                    task.wait(2) -- Cooldown
                                end
                            end
                        end
                    end
                    task.wait(0.1)
                end
            end)
        end
    end
end

-- Monitorar novos objetos adicionados
workspace.DescendantAdded:Connect(function(descendant)
    if descendant:IsA("RemoteEvent") and isDangerousEvent(descendant.Name) then
        task.spawn(function()
            while descendant.Parent and detectionActive do
                local character = player.Character
                if character then
                    local hrp = character:FindFirstChild("HumanoidRootPart")
                    if hrp then
                        local eventPos
                        
                        if descendant:IsA("BasePart") then
                            eventPos = descendant.Position
                        elseif descendant.Parent:IsA("Model") and descendant.Parent.PrimaryPart then
                            eventPos = descendant.Parent.PrimaryPart.Position
                        elseif descendant.Parent:FindFirstChildWhichIsA("BasePart") then
                            eventPos = descendant.Parent:FindFirstChildWhichIsA("BasePart").Position
                        end
                        
                        if eventPos then
                            local distance = (hrp.Position - eventPos).Magnitude
                            
                            if distance <= detectionRange then
                                local originalPos = hrp.CFrame
                                teleportTo(CONFIG.SafezonePos)
                                task.wait(1)
                                hrp.CFrame = originalPos
                                task.wait(2)
                            end
                        end
                    end
                end
                task.wait(0.1)
            end
        end)
    end
end)

-- Iniciar monitoramento
monitorRemoteEvents()

-- NotificaÃ§Ã£o de carregamento
game:GetService("StarterGui"):SetCore("SendNotification", {
    Title = "TSUG Panel";
    Text = "Painel carregado com sucesso!";
    Duration = 3;
})

print("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”")
print("TSUG Panel v1.0")
print("Status: âœ“ Carregado")
print("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”")
